<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>AtCoder ABC 441-E 题解</title>
    <link href="/2026/01/18/AtCoder-ABC-441-E-%E9%A2%98%E8%A7%A3/"/>
    <url>/2026/01/18/AtCoder-ABC-441-E-%E9%A2%98%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="题目描述">题目描述</h2><p>给定一个由 <code>A</code>、<code>B</code>、<code>C</code> 三种字符组成、长度为 N 的字符串 S。求 S 的所有非空连续子串中，包含的 <code>A</code> 的数量多于 <code>B</code> 的数量的子串个数。</p><h3 id="输入格式">输入格式</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">N</span><br><span class="hljs-attribute">S</span><br></code></pre></td></tr></table></figure><h3 id="输出格式">输出格式</h3><p>输出满足条件的子串个数。</p><h3 id="约束条件">约束条件</h3><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>≤</mo><mi>N</mi><mo>≤</mo><mn>5</mn><mo>×</mo><msup><mn>10</mn><mn>5</mn></msup></mrow><annotation encoding="application/x-tex">1 \leq N \leq 5 \times 10^5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8193em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">5</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span></span></span></span></li><li>S 是由 <code>A</code>、<code>B</code>、<code>C</code> 组成的长度为 N 的字符串</li></ul><hr><h2 id="解题思路">解题思路</h2><h3 id="前缀和转换">前缀和转换</h3><p>对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">i = 0, 1, 2, \ldots, N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span>，定义：</p><ul><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">A_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：S 前 i 个字符中 <code>A</code> 的数量</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>B</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">B_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：S 前 i 个字符中 <code>B</code> 的数量</li></ul><p>考虑 S 的第 i 到第 j 个字符构成的子串（<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>≤</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i \leq j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7955em;vertical-align:-0.136em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span>），该子串满足条件当且仅当：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>A</mi><mi>j</mi></msub><mo>−</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>&gt;</mo><msub><mi>B</mi><mi>j</mi></msub><mo>−</mo><msub><mi>B</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">A_j - A_{i-1} &gt; B_j - B_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>等价于：</p><p class="katex-block "><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>A</mi><mi>j</mi></msub><mo>−</mo><msub><mi>B</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo>&gt;</mo><mo stretchy="false">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>−</mo><msub><mi>B</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(A_j - B_j) &gt; (A_{i-1} - B_{i-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p><h3 id="差分数组">差分数组</h3><p>定义差分数组 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mo stretchy="false">(</mo><msub><mi>D</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>D</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>D</mi><mi>N</mi></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">D = (D_0, D_1, \ldots, D_N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>，其中 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub><mo>=</mo><msub><mi>A</mi><mi>i</mi></msub><mo>−</mo><msub><mi>B</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">D_i = A_i - B_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</p><p>那么问题转化为：求满足 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub><mo>&lt;</mo><msub><mi>D</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">D_i &lt; D_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 且 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>i</mi><mo>&lt;</mo><mi>j</mi><mo>≤</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">0 \leq i &lt; j \leq N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6986em;vertical-align:-0.0391em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> 的整数对 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(i, j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span> 的数量。</p><p>这类似于求<strong>逆序对</strong>的问题，但这里求的是顺序对的数量。</p><h3 id="前缀统计">前缀统计</h3><p>维护一个数组 <code>counter[d + N]</code>，表示在当前位置之前，满足 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>j</mi></msub><mo>=</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">D_j = d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span> 的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.854em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span> 的个数（由于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span> 的范围是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo>−</mo><mi>N</mi><mo separator="true">,</mo><mi>N</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[-N, N]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">]</span></span></span></span>，我们需要偏移 N 使索引非负）。</p><p>同时维护 <code>sum</code>，表示所有小于当前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">D_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的 <code>counter[d]</code> 之和。</p><h3 id="扫描过程">扫描过程</h3><p>初始时 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>0</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">D_0 = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span>，<code>counter[N] = 1</code>（表示 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mn>0</mn></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">D_0 = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span> 出现了一次）。</p><p>对于每个字符 c：</p><ol><li>如果 c = <code>A</code>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub><mo>=</mo><msub><mi>D</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">D_i = D_{i-1} + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></li><li>如果 c = <code>B</code>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub><mo>=</mo><msub><mi>D</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">D_i = D_{i-1} - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></li><li>如果 c = <code>C</code>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub><mo>=</mo><msub><mi>D</mi><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">D_i = D_{i-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8917em;vertical-align:-0.2083em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2083em;"><span></span></span></span></span></span></span></span></span></span></li></ol><p>对于每个新的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">D_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>，将当前满足 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>j</mi></msub><mo>&lt;</mo><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">D_j &lt; D_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 的所有 j 都可以作为左端点，i 作为右端点，构成一个满足条件的子串。</p><h3 id="具体步骤">具体步骤</h3><ol><li>遇到 <code>A</code>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">D_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 增加 1，<code>sum</code> 增加 <code>counter[D]</code>（因为新的更大的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">D_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 可以与之前较小的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">D_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 配对）</li><li>遇到 <code>B</code>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">D_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 减少 1，<code>sum</code> 减少 <code>counter[D]</code>（因为新的更小的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">D_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 不能与之前较小的 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">D_j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span> 配对）</li><li>更新 <code>counter[D_i]</code>，将当前 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>D</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">D_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0278em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 记录下来</li></ol><hr><h2 id="代码实现">代码实现</h2><h3 id="C-版本">C++ 版本</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;vector&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>&#123;<br>    <span class="hljs-type">unsigned</span> N;<br>    string S;<br>    cin &gt;&gt; N &gt;&gt; S;<br><br>    <span class="hljs-function">vector&lt;<span class="hljs-type">unsigned</span>&gt; <span class="hljs-title">counter</span><span class="hljs-params">(<span class="hljs-number">2</span> * N + <span class="hljs-number">1</span>)</span></span>;  <span class="hljs-comment">// counter[d + N] = D_j = d 的数量</span><br>    <span class="hljs-type">unsigned</span> D&#123;N&#125;;  <span class="hljs-comment">// D 的初始值偏移为 N</span><br>    ++counter[D];   <span class="hljs-comment">// D_0 = 0</span><br><br>    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> sum&#123;&#125;;  <span class="hljs-comment">// 小于当前 D 的 counter 之和</span><br>    <span class="hljs-type">unsigned</span> <span class="hljs-type">long</span> ans&#123;&#125;;<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">const</span> <span class="hljs-keyword">auto</span> c : S) &#123;<br>        <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;A&#x27;</span>) &#123;<br>            sum += counter[D++];<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;B&#x27;</span>) &#123;<br>            sum -= counter[--D];<br>        &#125;<br>        <span class="hljs-comment">// C 不影响 D 值</span><br><br>        ++counter[D];<br>        ans += sum;<br>    &#125;<br><br>    cout &lt;&lt; ans &lt;&lt; endl;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="Python-版本">Python 版本</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">solve</span>():<br>    N = <span class="hljs-built_in">int</span>(<span class="hljs-built_in">input</span>())<br>    S = <span class="hljs-built_in">input</span>().strip()<br>    <br>    <span class="hljs-comment"># D 的范围是 [-N, N]，偏移 N 后为 [0, 2N]</span><br>    counter = [<span class="hljs-number">0</span>] * (<span class="hljs-number">2</span> * N + <span class="hljs-number">1</span>)<br>    D = N  <span class="hljs-comment"># 初始 D_0 = 0，偏移后为 N</span><br>    counter[D] = <span class="hljs-number">1</span><br>    <br>    sum_less = <span class="hljs-number">0</span><br>    ans = <span class="hljs-number">0</span><br>    <br>    <span class="hljs-keyword">for</span> c <span class="hljs-keyword">in</span> S:<br>        <span class="hljs-keyword">if</span> c == <span class="hljs-string">&#x27;A&#x27;</span>:<br>            sum_less += counter[D]<br>            D += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">elif</span> c == <span class="hljs-string">&#x27;B&#x27;</span>:<br>            D -= <span class="hljs-number">1</span><br>            sum_less -= counter[D]<br>        <span class="hljs-comment"># C 不改变 D</span><br>        <br>        counter[D] += <span class="hljs-number">1</span><br>        ans += sum_less<br>    <br>    <span class="hljs-built_in">print</span>(ans)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    solve()<br></code></pre></td></tr></table></figure><hr><h2 id="复杂度分析">复杂度分析</h2><ul><li><strong>时间复杂度</strong>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，只需扫描一遍字符串</li><li><strong>空间复杂度</strong>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span>，需要大小为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>N</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2N+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord">2</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 的计数数组</li></ul><hr><h2 id="示例解释">示例解释</h2><h3 id="示例-1">示例 1</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">输入：ACBBCABCAB<br>输出：8<br></code></pre></td></tr></table></figure><p>满足条件的子串（标号从 1 开始）：</p><ul><li><code>A</code>：位置 1</li><li><code>AC</code>：位置 1-2</li><li><code>CA</code>：位置 5-6</li><li><code>CABCA</code>：位置 5-9</li><li><code>A</code>：位置 6</li><li><code>ABCA</code>：位置 6-9</li><li><code>CA</code>：位置 8-9</li><li><code>A</code>：位置 9</li></ul><h3 id="示例-2">示例 2</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs">输入：CCBC<br>输出：0<br></code></pre></td></tr></table></figure><p>所有子串中 <code>A</code> 的数量都不少于 <code>B</code> 的数量。</p><hr><h2 id="总结">总结</h2><p>这道题的关键在于将问题转化为差分数组的顺序对计数问题。通过巧妙的前缀统计，我们可以在 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mclose">)</span></span></span></span> 时间内解决问题，而不需要使用 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>N</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(N^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0641em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 的暴力枚举。</p><hr><p><strong>参考</strong>：<a href="https://atcoder.jp/contests/abc441/editorial/15109">AtCoder ABC 441 E 官方题解</a></p>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AtCoder</tag>
      
      <tag>算法</tag>
      
      <tag>题解</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>穷游庐山</title>
    <link href="/2025/03/02/fun/"/>
    <url>/2025/03/02/fun/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>这是1月12日早上拍的日出，手都冻僵了</p><!-- 修改后的视频容器 --><div class="custom-video-container">  <div class="video-wrapper">    <video       controls      preload="metadata"      poster="https://你的R2域名/path/poster.jpg"      style="object-fit: contain;"  <!-- 关键属性 -->    >      <source src="https://video.tingshuoyiqing.top/d6314d3601dd96f7d6a73ed60e5e989f.mp4" type="video/mp4">    </video>  </div></div><style>/* 新增核心适配代码 */.custom-video-container {  max-width: 800px;  margin: 1.5rem auto;}.video-wrapper {  position: relative;  padding-top: 56.25%; /* 16:9比例计算 (9/16=56.25%) */  background: #000;  border-radius: 8px;  overflow: hidden;  box-shadow: 0 2px 8px rgba(0,0,0,0.1);}.video-wrapper video {  position: absolute;  top: 0;  left: 0;  width: 100%;  height: 100%;}</style><p>这些都是过程中拍的一些照片，感觉我还是不会拍照</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302092151263.jpg" alt=""></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302092226918.jpg" alt=""></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302092154663.jpg" alt=""></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302092230718.jpg" alt=""></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302092224158.jpg" alt=""></div></div></div><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302092221937.jpg" alt="小路"></p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302094904533.jpg" alt=""></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302094904531.jpg" alt=""></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302094904530.jpg" alt=""></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302094904529.jpg" alt=""></div></div></div><p>这是谁家的小狗呀</p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302094904525.jpg" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302094904526.jpg" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302094904532.jpg" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302094904528.jpg" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250302094904527.jpg" alt=""></p>]]></content>
    
    
    
    <tags>
      
      <tag>玩</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>关于hexo博客fluid主题的音乐和视频配置</title>
    <link href="/2025/03/02/music-dev/"/>
    <url>/2025/03/02/music-dev/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>如果有托管平台最好了，就可以省去很多麻烦。使用外链直接嵌入网页，让ai提供代码模版</p></blockquote><h2 id="音乐">音乐</h2><p>音乐一般有两种方法：</p><ol><li>将音乐文件放在你的博客的source文件夹下，然后在你的markdown文件中使用<code>相对路径</code>来嵌入到markdown文件中</li><li>外链嵌入</li></ol><p>简单比较：</p><table><thead><tr><th>类型</th><th>优点</th><th>缺点</th></tr></thead><tbody><tr><td>本地嵌入</td><td>完全控制/无第三方依赖</td><td>占用存储空间/需处理版权</td></tr><tr><td>外链嵌入</td><td>零存储压力/平台功能丰富</td><td>依赖第三方稳定性</td></tr></tbody></table><h3 id="本地MP3文件嵌入">本地MP3文件嵌入</h3><p>用这个HTML代码嵌入你的markdown文件中,将音乐的链接替换成你的音乐路径.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;custom-audio-player&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">audio</span> </span><br><span class="hljs-tag">    <span class="hljs-attr">controls</span> </span><br><span class="hljs-tag">    <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 100%; margin: 1rem 0;&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">data-cover</span>=<span class="hljs-string">&quot;/music/cover.jpg&quot;</span></span><br><span class="hljs-tag">  &gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/music/xxx.mp3&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;audio/mpeg&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-comment">&lt;!-- 可选：自定义样式 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.custom-audio-player</span> <span class="hljs-selector-tag">audio</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">6px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="效果展示：">效果展示：</h4><div class="custom-audio-player">  <audio     controls     style="width: 100%; margin: 1rem 0;"    data-cover="/music/cover.jpg"  >    <source src="/music/痴心绝对.mp3" type="audio/mpeg">  </audio></div><!-- 可选：自定义样式 --><style>.custom-audio-player audio {  border-radius: 8px;  box-shadow: 0 2px 6px rgba(0,0,0,0.1);}</style><h3 id="外链嵌入">外链嵌入</h3><p>将以下代码嵌入你的markdown文件中,将音乐的链接替换成你的音乐链接.</p><p>不过这个代码有一点小瑕疵，就是一个页面最好只有一个音频，不然会起冲突。如果想要一个页面可以放多个，请把这段代码喂给deepseek修改。</p>    <div class="fold">      <div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-dcdac752" role="button" aria-expanded="false" aria-controls="collapse-dcdac752">        <div class="fold-arrow">▶</div>deeseek优化后的代码块      </div>      <div class="fold-collapse collapse" id="collapse-dcdac752">        <div class="fold-content">          <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><code class="hljs html">&#123;% raw %&#125;<br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;custom-audio-player&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;audio-info&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;play-button&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;playButton&quot;</span> <span class="hljs-attr">aria-label</span>=<span class="hljs-string">&quot;播放音频&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;play-icon&quot;</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">&quot;0 0 24 24&quot;</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">&quot;white&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">d</span>=<span class="hljs-string">&quot;M8 5v14l11-7z&quot;</span>/&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pause-icon&quot;</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">&quot;0 0 24 24&quot;</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">&quot;white&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">d</span>=<span class="hljs-string">&quot;M6 19h4V5H6v14zm8-14v14h4V5h-4z&quot;</span>/&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;audio-title&quot;</span>&gt;</span>你的音乐标题 - 歌手<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>      /* 放你的音乐标题 */<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;progress-container&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;progressContainer&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;progress-bar&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;progressBar&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;time-display&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;currentTime&quot;</span>&gt;</span>0:00<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;duration&quot;</span>&gt;</span>0:00<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>  <span class="hljs-comment">&lt;!-- 修正后的音频路径 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">audio</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;audioElement&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display: none;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;你的视频链接&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;audio/mpeg&quot;</span>&gt;</span>      /* 放你的链接 */<br>    你的浏览器不支持音频播放。<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">audio</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css">  <span class="hljs-comment">/* 自定义播放器样式 */</span></span><br><span class="language-css">  <span class="hljs-selector-class">.custom-audio-player</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">34</span>, <span class="hljs-number">46</span>, <span class="hljs-number">80</span>, <span class="hljs-number">0.8</span>);</span><br><span class="language-css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">1.5rem</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">6px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.audio-info</span> &#123; <span class="hljs-attribute">display</span>: flex; <span class="hljs-attribute">align-items</span>: center; <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>; &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.audio-title</span> &#123; </span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#ffffff</span>;</span><br><span class="language-css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">1rem</span>;</span><br><span class="language-css">    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">600</span>;</span><br><span class="language-css">    <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">flex-grow</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.play-button</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#0e83cd</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border</span>: none;</span><br><span class="language-css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">36px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">36px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">    <span class="hljs-attribute">transition</span>: background-color <span class="hljs-number">0.3s</span>;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">    <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">    <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.progress-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">6px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.2</span>);</span><br><span class="language-css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.progress-bar</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#0e83cd</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">3px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">0%</span>;</span><br><span class="language-css">    <span class="hljs-attribute">transition</span>: width <span class="hljs-number">0.1s</span> linear;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.time-display</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">    <span class="hljs-attribute">justify-content</span>: space-between;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.8</span>);</span><br><span class="language-css">    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">0.8rem</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">  <span class="hljs-selector-class">.pause-icon</span> &#123; <span class="hljs-attribute">display</span>: none; &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;DOMContentLoaded&#x27;</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> audioElement = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;audioElement&#x27;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> playButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;playButton&#x27;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> playIcon = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.play-icon&#x27;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> pauseIcon = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.pause-icon&#x27;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> progressBar = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;progressBar&#x27;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> progressContainer = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;progressContainer&#x27;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> currentTimeDisplay = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;currentTime&#x27;</span>);</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> durationDisplay = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;duration&#x27;</span>);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 初始化时间显示</span></span><br><span class="language-javascript">  audioElement.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;loadedmetadata&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    durationDisplay.<span class="hljs-property">textContent</span> = <span class="hljs-title function_">formatTime</span>(audioElement.<span class="hljs-property">duration</span>);</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 进度条更新</span></span><br><span class="language-javascript">  audioElement.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;timeupdate&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> percent = (audioElement.<span class="hljs-property">currentTime</span> / audioElement.<span class="hljs-property">duration</span>) * <span class="hljs-number">100</span>;</span><br><span class="language-javascript">    progressBar.<span class="hljs-property">style</span>.<span class="hljs-property">width</span> = <span class="hljs-string">`<span class="hljs-subst">$&#123;percent&#125;</span>%`</span>;</span><br><span class="language-javascript">    currentTimeDisplay.<span class="hljs-property">textContent</span> = <span class="hljs-title function_">formatTime</span>(audioElement.<span class="hljs-property">currentTime</span>);</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 播放/暂停控制</span></span><br><span class="language-javascript">  playButton.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    audioElement.<span class="hljs-property">paused</span> ? audioElement.<span class="hljs-title function_">play</span>() : audioElement.<span class="hljs-title function_">pause</span>();</span><br><span class="language-javascript">    playIcon.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = audioElement.<span class="hljs-property">paused</span> ? <span class="hljs-string">&#x27;block&#x27;</span> : <span class="hljs-string">&#x27;none&#x27;</span>;</span><br><span class="language-javascript">    pauseIcon.<span class="hljs-property">style</span>.<span class="hljs-property">display</span> = audioElement.<span class="hljs-property">paused</span> ? <span class="hljs-string">&#x27;none&#x27;</span> : <span class="hljs-string">&#x27;block&#x27;</span>;</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 点击进度条跳转</span></span><br><span class="language-javascript">  progressContainer.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> rect = progressContainer.<span class="hljs-title function_">getBoundingClientRect</span>();</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> percent = (e.<span class="hljs-property">clientX</span> - rect.<span class="hljs-property">left</span>) / rect.<span class="hljs-property">width</span>;</span><br><span class="language-javascript">    audioElement.<span class="hljs-property">currentTime</span> = percent * audioElement.<span class="hljs-property">duration</span>;</span><br><span class="language-javascript">  &#125;);</span><br><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-comment">// 时间格式化函数</span></span><br><span class="language-javascript">  <span class="hljs-keyword">function</span> <span class="hljs-title function_">formatTime</span>(<span class="hljs-params">seconds</span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> mins = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(seconds / <span class="hljs-number">60</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> secs = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(seconds % <span class="hljs-number">60</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;mins&#125;</span>:<span class="hljs-subst">$&#123;secs.toString().padStart(<span class="hljs-number">2</span>, <span class="hljs-string">&#x27;0&#x27;</span>)&#125;</span>`</span>;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;);</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br>&#123;% endraw %&#125;<br></code></pre></td></tr></table></figure>        </div>      </div>    </div><h4 id="效果展示：-2">效果展示：</h4><div class="custom-audio-player">  <div class="audio-info">    <button class="play-button" id="playButton" aria-label="播放音频">      <svg class="play-icon" viewBox="0 0 24 24" fill="white">        <path d="M8 5v14l11-7z"/>      </svg>      <svg class="pause-icon" viewBox="0 0 24 24" fill="white">        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>      </svg>    </button>    <div class="audio-title">天后 - 陈势安</div>  </div>  <div class="progress-container" id="progressContainer">    <div class="progress-bar" id="progressBar"></div>  </div>  <div class="time-display">    <span id="currentTime">0:00</span>    <span id="duration">0:00</span>  </div>  <!-- 修正后的音频路径 -->  <audio id="audioElement" style="display: none;">    <source src="https://pub-a3f1bd9f229949c4a1c424d879a5badf.r2.dev/%E5%A4%A9%E5%90%8E.mp3" type="audio/mpeg">    你的浏览器不支持音频播放。  </audio></div><style>  /* 自定义播放器样式 */  .custom-audio-player {    width: 100%;    background-color: rgba(34, 46, 80, 0.8);    border-radius: 8px;    padding: 12px;    margin: 1.5rem 0;    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);  }  .audio-info { display: flex; align-items: center; margin-bottom: 10px; }  .audio-title {     color: #ffffff;    font-size: 1rem;    font-weight: 600;    margin-left: 10px;    flex-grow: 1;  }  .play-button {    background-color: #0e83cd;    border: none;    border-radius: 50%;    width: 36px;    height: 36px;    cursor: pointer;    transition: background-color 0.3s;    display: flex;    justify-content: center;    align-items: center;  }  .progress-container {    width: 100%;    height: 6px;    background-color: rgba(255, 255, 255, 0.2);    border-radius: 3px;    margin-bottom: 8px;  }  .progress-bar {    height: 100%;    background-color: #0e83cd;    border-radius: 3px;    width: 0%;    transition: width 0.1s linear;  }  .time-display {    display: flex;    justify-content: space-between;    color: rgba(255, 255, 255, 0.8);    font-size: 0.8rem;  }  .pause-icon { display: none; }</style><script>document.addEventListener('DOMContentLoaded', function() {  const audioElement = document.getElementById('audioElement');  const playButton = document.getElementById('playButton');  const playIcon = document.querySelector('.play-icon');  const pauseIcon = document.querySelector('.pause-icon');  const progressBar = document.getElementById('progressBar');  const progressContainer = document.getElementById('progressContainer');  const currentTimeDisplay = document.getElementById('currentTime');  const durationDisplay = document.getElementById('duration');  // 初始化时间显示  audioElement.addEventListener('loadedmetadata', () => {    durationDisplay.textContent = formatTime(audioElement.duration);  });  // 进度条更新  audioElement.addEventListener('timeupdate', () => {    const percent = (audioElement.currentTime / audioElement.duration) * 100;    progressBar.style.width = `${percent}%`;    currentTimeDisplay.textContent = formatTime(audioElement.currentTime);  });  // 播放/暂停控制  playButton.addEventListener('click', () => {    audioElement.paused ? audioElement.play() : audioElement.pause();    playIcon.style.display = audioElement.paused ? 'block' : 'none';    pauseIcon.style.display = audioElement.paused ? 'none' : 'block';  });  // 点击进度条跳转  progressContainer.addEventListener('click', (e) => {    const rect = progressContainer.getBoundingClientRect();    const percent = (e.clientX - rect.left) / rect.width;    audioElement.currentTime = percent * audioElement.duration;  });  // 时间格式化函数  function formatTime(seconds) {    const mins = Math.floor(seconds / 60);    const secs = Math.floor(seconds % 60);    return `${mins}:${secs.toString().padStart(2, '0')}`;  }});</script><h2 id="视频">视频</h2><p>将以下代码（适合cloudflare的R2储存桶）嵌入你的markdown文件中,记得将视频的链接和封面链接替换成你的视频链接和封面链接.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-comment">&lt;!-- 修改后的视频容器 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;custom-video-container&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;video-wrapper&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">video</span> </span><br><span class="hljs-tag">      <span class="hljs-attr">controls</span></span><br><span class="hljs-tag">      <span class="hljs-attr">preload</span>=<span class="hljs-string">&quot;metadata&quot;</span></span><br><span class="hljs-tag">      <span class="hljs-attr">poster</span>=<span class="hljs-string">&quot;https://xxx.jpg&quot;</span>         /* <span class="hljs-attr">改成你的封面链接</span>*/</span><br><span class="hljs-tag">      <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;object-fit: contain;&quot;</span>  &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">关键属性</span> <span class="hljs-attr">--</span>&gt;</span><br>    &gt;<br>      <span class="hljs-tag">&lt;<span class="hljs-name">source</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://xxx.mp4&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;video/mp4&quot;</span>&gt;</span>    /* 改成你的视频链接*/<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">video</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-comment">/* 新增核心适配代码 */</span></span><br><span class="language-css"><span class="hljs-selector-class">.custom-video-container</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">margin</span>: <span class="hljs-number">1.5rem</span> auto;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.video-wrapper</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">56.25%</span>; <span class="hljs-comment">/* 16:9比例计算 (9/16=56.25%) */</span></span><br><span class="language-css">  <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>;</span><br><span class="language-css">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">2px</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.video-wrapper</span> <span class="hljs-selector-tag">video</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="效果展示：-3">效果展示：</h4><div class="custom-video-container">  <div class="video-wrapper">    <video       controls      preload="metadata"      poster="https://你的R2域名/path/poster.jpg"      style="object-fit: contain;"  <!-- 关键属性 -->    >      <source src="https://video.tingshuoyiqing.top/28553773789-1-192.mp4" type="video/mp4">    </video>  </div></div><style>/* 新增核心适配代码 */.custom-video-container {  max-width: 800px;  margin: 1.5rem auto;}.video-wrapper {  position: relative;  padding-top: 56.25%; /* 16:9比例计算 (9/16=56.25%) */  background: #000;  border-radius: 8px;  overflow: hidden;  box-shadow: 0 2px 8px rgba(0,0,0,0.1);}.video-wrapper video {  position: absolute;  top: 0;  left: 0;  width: 100%;  height: 100%;}</style><p>这是我在B站上下载的一个视频，所以有B站的水印。我把它储存在了cloudflare的R2储存桶上。</p><p>关于这些视频文件，你可以上传到你的服务器上，然后使用服务器提供的链接。也可以使用一些视频分享网站的链接</p><p>但是第三方平台的视频一般都是有一些限制的，比如水印和弹幕（哔哩哔哩）、无法正常访问（YouTube），等等。</p><p>所以还是找个稳定的托管平台吧。我现在用的是cloudflare的R2，感觉还不错，你也可以尝试一下。</p><p>下面将利用哔哩哔哩和YouTube来演示一下</p><h3 id="哔哩哔哩嵌入方案">哔哩哔哩嵌入方案</h3><ol><li>获取B站嵌入代码<br>打开视频页面 → 点击「分享」按钮 → 选择「嵌入代码」</li></ol><p>复制类似以下代码：</p><p>将视频链接复制下来，替换代码中的默认视频链接。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;//player.bilibili.com/player.html?aid=视频AID&amp;cid=CID&amp;page=1&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">scrolling</span>=<span class="hljs-string">&quot;no&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">border</span>=<span class="hljs-string">&quot;0&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">frameborder</span>=<span class="hljs-string">&quot;no&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">framespacing</span>=<span class="hljs-string">&quot;0&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">allowfullscreen</span>=<span class="hljs-string">&quot;true&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br></code></pre></td></tr></table></figure><p>建议使用这个deepseek优化过的代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bilibili-video-container&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span></span><br><span class="hljs-tag">    <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;//player.bilibili.com/player.html?aid=xxxxx&amp;cid=xxxxx&amp;page=1&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">scrolling</span>=<span class="hljs-string">&quot;no&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">frameborder</span>=<span class="hljs-string">&quot;no&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">allowfullscreen</span></span><br><span class="hljs-tag">    <span class="hljs-attr">loading</span>=<span class="hljs-string">&quot;lazy&quot;</span>                    &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">延迟加载优化</span> <span class="hljs-attr">--</span>&gt;</span><br>    data-src=&quot;https://player.bilibili.com/player.html?aid=xxxxx&quot; <span class="hljs-comment">&lt;!-- 备用 --&gt;</span><br>  &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-comment">/* B站专用适配 */</span></span><br><span class="language-css"><span class="hljs-selector-class">.bilibili-video-container</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">margin</span>: <span class="hljs-number">1.5rem</span> auto;</span><br><span class="language-css">  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">56.25%</span>;  <span class="hljs-comment">/* 16:9比例 */</span></span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.bilibili-video-container</span> <span class="hljs-selector-tag">iframe</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">12px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="效果展示：-4">效果展示：</h4><p>B站给的嵌入代码效果：</p><iframe src="//player.bilibili.com/player.html?isOutside=true&aid=114058158153679&bvid=BV1VLPWeREVd&cid=28553773789&p=1"         scrolling="no"         border="0"         frameborder="no"         framespacing="0"         allowfullscreen="true"></iframe><br><p>deepseek优化的嵌入代码效果：</p><div class="bilibili-video-container">  <iframe    src="//player.bilibili.com/player.html?isOutside=true&aid=114058158153679&bvid=BV1VLPWeREVd&cid=28553773789&p=1"    scrolling="no"    frameborder="no"    allowfullscreen    loading="lazy"                    <!-- 延迟加载优化 -->    data-src="https://player.bilibili.com/player.html?aid=xxxxx" <!-- 备用 -->  ></iframe></div><style>/* B站专用适配 */.bilibili-video-container {  position: relative;  max-width: 800px;  margin: 1.5rem auto;  padding-top: 56.25%;  /* 16:9比例 */}.bilibili-video-container iframe {  position: absolute;  top: 0;  left: 0;  width: 100%;  height: 100%;  border-radius: 8px;  box-shadow: 0 4px 12px rgba(0,0,0,0.1);}</style><h3 id="YouTube嵌入方案">YouTube嵌入方案</h3><p>获取YouTube嵌入代码</p><p>打开视频 → 点击「分享」→ 选择「嵌入」→ 复制代码</p><p>示例代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-tag">&lt;<span class="hljs-name">iframe</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;560&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;315&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://www.youtube.com/embed/视频ID&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">frameborder</span>=<span class="hljs-string">&quot;0&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">allow</span>=<span class="hljs-string">&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture&quot;</span> </span><br><span class="hljs-tag">        <span class="hljs-attr">allowfullscreen</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br></code></pre></td></tr></table></figure><p>deepseek优化后的嵌入代码:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs HTML"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;youtube-video-container&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">iframe</span></span><br><span class="hljs-tag">    <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://www.youtube.com/embed/视频ID&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">allow</span>=<span class="hljs-string">&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">allowfullscreen</span></span><br><span class="hljs-tag">    <span class="hljs-attr">loading</span>=<span class="hljs-string">&quot;lazy&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">data-src</span>=<span class="hljs-string">&quot;https://www.youtube-nocookie.com/embed/视频ID&quot;</span> &lt;!<span class="hljs-attr">--</span> <span class="hljs-attr">隐私增强</span> <span class="hljs-attr">--</span>&gt;</span><br>  &gt;<span class="hljs-tag">&lt;/<span class="hljs-name">iframe</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-comment">/* YouTube专用适配 */</span></span><br><span class="language-css"><span class="hljs-selector-class">.youtube-video-container</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">  <span class="hljs-attribute">max-width</span>: <span class="hljs-number">800px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">margin</span>: <span class="hljs-number">1.5rem</span> auto;</span><br><span class="language-css">  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">56.25%</span>;  <span class="hljs-comment">/* 16:9比例 */</span></span><br><span class="language-css">  <span class="hljs-attribute">background</span>: <span class="hljs-number">#000</span>;      <span class="hljs-comment">/* 预加载黑底 */</span></span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.youtube-video-container</span> <span class="hljs-selector-tag">iframe</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">  <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">  <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">  <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">8px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">4px</span> <span class="hljs-number">12px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">0.1</span>);</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-comment">/* 暗黑模式适配 */</span></span><br><span class="language-css"><span class="hljs-keyword">@media</span> (<span class="hljs-attribute">prefers-color-scheme</span>: dark) &#123;</span><br><span class="language-css">  <span class="hljs-selector-class">.youtube-video-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#111</span>;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h4 id="效果展示：-5">效果展示：</h4><p>YouTube给的嵌入代码效果：</p><iframe width="560" height="315"         src="https://www.youtube.com/embed/kjG92Mb76s8?si=c0aUBx-iz7h4Mzuy"         frameborder="0"         allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"         allowfullscreen></iframe><p>deepseek优化后的嵌入代码效果：</p><div class="youtube-video-container">  <iframe    src="https://www.youtube.com/embed/kjG92Mb76s8?si=c0aUBx-iz7h4Mzuy"    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"    allowfullscreen    loading="lazy"    data-src="https://www.youtube-nocookie.com/embed/视频ID" <!-- 隐私增强 -->  ></iframe></div><style>/* YouTube专用适配 */.youtube-video-container {  position: relative;  max-width: 800px;  margin: 1.5rem auto;  padding-top: 56.25%;  /* 16:9比例 */  background: #000;      /* 预加载黑底 */}.youtube-video-container iframe {  position: absolute;  top: 0;  left: 0;  width: 100%;  height: 100%;  border-radius: 8px;  box-shadow: 0 4px 12px rgba(0,0,0,0.1);}/* 暗黑模式适配 */@media (prefers-color-scheme: dark) {  .youtube-video-container {    background: #111;  }}</style><p>这些就是我今天的所有配置日志了。以后再记录关于如何获得cf的R2储存桶的笔记，因为我还没有学计算机网络，对于域名解析不太<br>了解。</p><p>我有一个域名无法被访问，我也还没有找到原因。不过应该是域名本身的原因，以ping就全红。等了解的更多了，就自己买一个云服务器玩。</p><p>就不用在网上到处找免费的平台配置了（不过在这个过程中我也学会了很多东西）</p>]]></content>
    
    
    
    <tags>
      
      <tag>网站配置</tag>
      
      <tag>音乐</tag>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我接触的第一个算法</title>
    <link href="/2025/03/01/suanfa/"/>
    <url>/2025/03/01/suanfa/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="custom-audio-player">  <div class="audio-info">    <button class="play-button" id="playButton" aria-label="播放音频">      <svg class="play-icon" viewBox="0 0 24 24" fill="white">        <path d="M8 5v14l11-7z"/>      </svg>      <svg class="pause-icon" viewBox="0 0 24 24" fill="white">        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>      </svg>    </button>    <div class="audio-title">天后 - 陈势安</div>  </div>  <div class="progress-container" id="progressContainer">    <div class="progress-bar" id="progressBar"></div>  </div>  <div class="time-display">    <span id="currentTime">0:00</span>    <span id="duration">0:00</span>  </div>  <!-- 修正后的音频路径 -->  <audio id="audioElement" style="display: none;">    <source src="https://pub-a3f1bd9f229949c4a1c424d879a5badf.r2.dev/%E5%A4%A9%E5%90%8E.mp3" type="audio/mpeg">    你的浏览器不支持音频播放。  </audio></div><style>  /* 自定义播放器样式 */  .custom-audio-player {    width: 100%;    background-color: rgba(34, 46, 80, 0.8);    border-radius: 8px;    padding: 12px;    margin: 1.5rem 0;    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);  }  .audio-info { display: flex; align-items: center; margin-bottom: 10px; }  .audio-title {     color: #ffffff;    font-size: 1rem;    font-weight: 600;    margin-left: 10px;    flex-grow: 1;  }  .play-button {    background-color: #0e83cd;    border: none;    border-radius: 50%;    width: 36px;    height: 36px;    cursor: pointer;    transition: background-color 0.3s;    display: flex;    justify-content: center;    align-items: center;  }  .progress-container {    width: 100%;    height: 6px;    background-color: rgba(255, 255, 255, 0.2);    border-radius: 3px;    margin-bottom: 8px;  }  .progress-bar {    height: 100%;    background-color: #0e83cd;    border-radius: 3px;    width: 0%;    transition: width 0.1s linear;  }  .time-display {    display: flex;    justify-content: space-between;    color: rgba(255, 255, 255, 0.8);    font-size: 0.8rem;  }  .pause-icon { display: none; }</style><script>document.addEventListener('DOMContentLoaded', function() {  const audioElement = document.getElementById('audioElement');  const playButton = document.getElementById('playButton');  const playIcon = document.querySelector('.play-icon');  const pauseIcon = document.querySelector('.pause-icon');  const progressBar = document.getElementById('progressBar');  const progressContainer = document.getElementById('progressContainer');  const currentTimeDisplay = document.getElementById('currentTime');  const durationDisplay = document.getElementById('duration');  // 初始化时间显示  audioElement.addEventListener('loadedmetadata', () => {    durationDisplay.textContent = formatTime(audioElement.duration);  });  // 进度条更新  audioElement.addEventListener('timeupdate', () => {    const percent = (audioElement.currentTime / audioElement.duration) * 100;    progressBar.style.width = `${percent}%`;    currentTimeDisplay.textContent = formatTime(audioElement.currentTime);  });  // 播放/暂停控制  playButton.addEventListener('click', () => {    audioElement.paused ? audioElement.play() : audioElement.pause();    playIcon.style.display = audioElement.paused ? 'block' : 'none';    pauseIcon.style.display = audioElement.paused ? 'none' : 'block';  });  // 点击进度条跳转  progressContainer.addEventListener('click', (e) => {    const rect = progressContainer.getBoundingClientRect();    const percent = (e.clientX - rect.left) / rect.width;    audioElement.currentTime = percent * audioElement.duration;  });  // 时间格式化函数  function formatTime(seconds) {    const mins = Math.floor(seconds / 60);    const secs = Math.floor(seconds % 60);    return `${mins}:${secs.toString().padStart(2, '0')}`;  }});</script><div class="note note-info">            <p>有人疼</p><p>才显得多么出众</p>          </div><h1>我接触的第一个算法</h1><p>在机房上第一节程序设计课的时候，我看老师的那个10个数求最大值的C语言程序挺有意思的，和我平时的那些过家家代码有点不同</p><p>在下课的时候我也开始尝试了一下，我一开始没有完成。但是我问了deepseek，后来就写出来了。</p><p>我一开始的代码是这样的：</p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250301220744995.jpg" alt=""></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> max, x, i;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);<br>    max = x;<br>    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br><br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;max = %d&quot;</span>, max);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>一开始我不知道for循环里面怎么写，我也没注意到max = x，我就问deepseek，然后我就理解了：</p><p>首先初始化一个max(将第一个x赋max)然后再不断的将新输入的x与其比较。</p><p>连续输入10个数，用for循环对每个数进行比较，让更大的x再赋值给max，这样<strong>不断更新max的值</strong>，确保max始终大于x的值。</p><p>我就是没有这种思路所以写不出for循环里比较和更新的程序，于是我又重新写了一下：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-type">int</span> max, x, i;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x);<br>    max = x;<br>    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">1</span>; i &lt; <span class="hljs-number">10</span>; i++) &#123;<br>        <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;x); <span class="hljs-comment">//循环输入用于比较</span><br>        <span class="hljs-keyword">if</span>(x &gt; max) &#123;<br>            max = x;  <span class="hljs-comment">//如果x大于max，则将更大的x赋值给max</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;max = %d&quot;</span>, max);  <span class="hljs-comment">// 输入完10个数后的max就是最大值了</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>然后我就知道了，原来算法里最基础的知识点<code>变量的初始化</code>和<code>变量的动态更新</code>。</p>]]></content>
    
    
    <categories>
      
      <category>算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git回滚</title>
    <link href="/2025/02/23/git_commend/"/>
    <url>/2025/02/23/git_commend/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="note note-info">            <p>如果你愿意一层一层一层的拨开我的心</p><p>你会发现 你会讶异</p><p>你是我最压抑 最深处的秘密</p>          </div><p>2025-2-22</p><p>可以通过 <code>git commit -am</code> 命令提交所有文件的修改（当你觉得所有工作都做完以后）。但是如果有新文件，需要先 <code>git add</code>新文件名，再 <code>git commit </code>提交修改。因为 <code>git commit -am</code> 命令适用于已经跟踪的文件。</p><p>如果觉得命令太长了，可以使用alias命令来定义成一个别名,比如：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">log</span> --oneline --graph --decorate --all<br><br><span class="hljs-built_in">alias</span> graph = <span class="hljs-string">&quot;git log --oneline --graph --decorate --all&quot;</span> <span class="hljs-comment">#将这个命令定义成一个更短的别名</span><br></code></pre></td></tr></table></figure><p>2025-2-26</p><h2 id="回滚">回滚</h2><h3 id="文件回滚">文件回滚</h3><p>情况一：如果没有add，即没有暂存只在本地修改的话：</p><ol><li><p><code>git restore &lt;file&gt;</code> 可以将修改的文件<strong>恢复到最近一次提交的状态</strong></p></li><li><p><code>git checkout &lt;commit-hash&gt; &lt;file&gt;</code> 可以将修改的文件<strong>恢复到<commit-hash>提交的状态</strong></p></li></ol><p>情况二：如果已经add了的话:  <code>git restore --staged &lt;file&gt;</code> 取消暂存</p><ol><li><p>再利用<code>情况一</code> 恢复文件，这种操作比较安全</p></li><li><p>或使用<code>git checkout HEAD &lt;file&gt;</code>，直接恢复到HEAD提交，这个命令会丢失本地的修改</p></li></ol><p>情况三：如果已经commit（未push）了的话：</p><ol><li><p>可以使用<code>git reset --soft HEAD~1</code>，撤销最近的一次提交，保留修改（软回滚，仅仅回退commit，回到add之后的状态。这样<code>git log</code>不会再包含这次提交，但你的修改仍然存在，并处于<strong>已暂存</strong>的状态）</p></li><li><p>或者使用<code>git reset HEAD~1</code>，<code>git log</code>同样不包含这次提交，但你的修改仍然存在，并处于<strong>未暂存</strong>的状态</p></li><li><p>或者使用<code>git reset --hard HEAD~1</code>，你的修改无法保存，完全恢复到上次提交的状态。</p></li></ol><p>情况四：如果已经push了的话：</p><p>总结：<br><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250226095341508.png" alt=""></p><h3 id="分支回滚">分支回滚</h3><p>2025-2-23</p><h2 id="关于git-stash">关于git stash</h2><p>当你在开发一个分支时，突然发现自己需要切换到另一个分支，但是这个分支还没有提交，但是你又不想提交，因为你还有一些工作没有做完，这时候可以使用<code>git stash</code>命令来保存当前的工作状态，然后切换到另一个分支，等你做完了以后，再切换回来，使用<code>git stash pop</code>命令来恢复之前的工作状态。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git stash <span class="hljs-comment"># 保存当前的工作状态</span><br>git stash list <span class="hljs-comment"># 查看保存的工作状态列表</span><br>git stash pop <span class="hljs-comment"># 恢复最近一次保存的工作状态</span><br></code></pre></td></tr></table></figure><h2 id="关于git-pull">关于git pull</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git pull = git fetch + git merge<br></code></pre></td></tr></table></figure><p>git pull 是 git fetch 和 git merge 的缩写。git fetch 用于从远程仓库获取最新的代码，而 git merge 则用于将获取到的代码合并到本地分支。但是如果多人共同开发一个分支时，可能会出现冲突。</p><p>比如同事A修改了文件A，同事B也修改了文件A，但是同事A先一步提交了，同事B后一步提交，那同事B就会被拒绝提交，因为git merge 会将本地分支和远程分支进行合并，如果有冲突，就会拒绝合并。</p><p>所以如果多人共同开发一个分支时，最好使用 <code>git pull --rebase</code>命令，这样有冲突的话，会把你本地的提交放一边，先把远程分支的提交拉下来，然后再把你的提交放回去，这样不仅解决了冲突还保持了分支的线性。</p><p>来源于<a href="https://www.bilibili.com/video/BV1McyYYtEX4/?spm_id_from=333.337.search-card.all.click&amp;vd_source=7184f70b126b0d6d3ad6ad4235c0c45c">技术爬爬虾</a></p><p>2025-2-27</p><h2 id="关于分支合并">关于分支合并</h2><h4 id="关于合并（merge）">关于合并（merge）</h4><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250223140435751.png" alt="merge"></p><p>merge会将两个分支的提交合并成一个新的提交。分支各自的提交记录都会保留，保留整个过程完整的提交记录，可以看到每个成员的贡献。</p><h4 id="关于变基（rebase）">关于变基（rebase）</h4><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250223140917518.png" alt="rebase"></p><p>来源于<a href="https://www.bilibili.com/video/BV1HM411377j?spm_id_from=333.788.videopod.sections&amp;vd_source=7184f70b126b0d6d3ad6ad4235c0c45c&amp;p=18">GeekHour</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">git rebase &lt;branch&gt; <span class="hljs-comment"># 把当前分支的提交放到&lt;branch&gt;分支的后面</span><br>git rebase -i &lt;branch&gt; <span class="hljs-comment"># 交互式的rebase，会弹出一个窗口，让你选择哪些提交要保留，哪些提交要删除</span><br><br><span class="hljs-comment"># 冲突解决时</span><br>git rebase --<span class="hljs-built_in">continue</span> <span class="hljs-comment"># 继续rebase</span><br><br>git rebase --skip<br>git rebase --abort <span class="hljs-comment"># 取消rebase</span><br></code></pre></td></tr></table></figure><h4 id="关于压缩（squash）">关于压缩（squash）</h4><p>它将多个提交合并成一个提交，从而简化提交历史。虽然会保留所有代码变更的最终结果，但会丢失每个提交的细节信息，从而无法追溯每个中间开发步骤</p><h2 id="关于git-rm">关于git rm</h2><h4 id="情况一：如果已经暂存了，就不能直接git-rmbash会报错，会导致暂存区的更改丢失。">情况一：如果已经暂存了，就不能直接<code>git rm</code>bash会报错，会导致暂存区的更改丢失。</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">rm</span> --cached &lt;file&gt; <span class="hljs-comment"># 移除跟踪变为Untracked，但还保留在本地上</span><br><br>git <span class="hljs-built_in">rm</span> -f &lt;file&gt; <span class="hljs-comment"># 强制删除, 不保留在本地</span><br></code></pre></td></tr></table></figure><p>当你误提交了一个有用的文件时，可以使用<code>git rm --cached &lt;file&gt;</code>来删除，但是会保留在本地<br>当你决定弃用一个文件的话，可以使用<code>git rm -f &lt;file&gt;</code>来强制删除</p><h5 id="情况二：如果没有暂存，就可以直接git-rm，会同时删除工作区和暂存区的文件">情况二：如果没有暂存，就可以直接<code>git rm</code>，会同时删除工作区和暂存区的文件</h5><p>2025-2-24</p><h2 id="文件的常见操作">文件的常见操作</h2><blockquote><p>关于这些系统命令是否需要加<code>git</code>前缀，需要根据这个文件（目录）是否被纳入管理即有没有被add</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">touch</span> &lt;file&gt; <span class="hljs-comment"># 创建文件</span><br>git <span class="hljs-built_in">mv</span> &lt;file&gt; &lt;newfile&gt; <span class="hljs-comment"># 重命名文件</span><br><br><span class="hljs-built_in">echo</span> &lt;content&gt; &gt; &lt;file&gt; <span class="hljs-comment"># 写入文件</span><br><span class="hljs-built_in">echo</span> &lt;content&gt; &gt;&gt; &lt;file&gt; <span class="hljs-comment"># 追加文件内容</span><br><span class="hljs-built_in">cat</span> &lt;file&gt; <span class="hljs-comment"># 查看文件内容</span><br><br><span class="hljs-built_in">cp</span> &lt;file&gt; &lt;newfile&gt; <span class="hljs-comment"># 复制文件</span><br><span class="hljs-built_in">cp</span> -r &lt;<span class="hljs-built_in">dir</span>&gt; &lt;newdir&gt; <span class="hljs-comment"># 复制文件夹</span><br><br><span class="hljs-built_in">mv</span> &lt;file&gt; &lt;newfile&gt; <span class="hljs-comment"># 重命名文件</span><br><br><span class="hljs-built_in">mkdir</span> &lt;<span class="hljs-built_in">dir</span>&gt; <span class="hljs-comment"># 创建文件夹</span><br><span class="hljs-built_in">mkdir</span> -p &lt;dir1&gt;/&lt;dir2&gt; <span class="hljs-comment"># 创建递归文件夹</span><br><br><span class="hljs-built_in">ls</span>                  <span class="hljs-comment"># 列出当前目录文件</span><br><span class="hljs-built_in">ls</span> -l               <span class="hljs-comment"># 详细信息</span><br><span class="hljs-built_in">ls</span> -a               <span class="hljs-comment"># 显示隐藏文件</span><br><span class="hljs-built_in">ls</span> -lh              <span class="hljs-comment"># 以可读格式显示大小</span><br><span class="hljs-built_in">ls</span> -lt              <span class="hljs-comment"># 按修改时间排序</span><br><br><span class="hljs-built_in">cd</span> <span class="hljs-built_in">dirname</span>          <span class="hljs-comment"># 进入目录</span><br><span class="hljs-built_in">cd</span> ..               <span class="hljs-comment"># 返回上一级目录</span><br><span class="hljs-built_in">cd</span> /home/user       <span class="hljs-comment"># 进入指定目录</span><br><span class="hljs-built_in">cd</span> ~                <span class="hljs-comment"># 进入 home 目录</span><br><span class="hljs-built_in">cd</span> -                <span class="hljs-comment"># 返回上次所在目录</span><br><br>git <span class="hljs-built_in">rm</span> -r &lt;<span class="hljs-built_in">dir</span>&gt; <span class="hljs-comment"># 删除文件夹</span><br>git <span class="hljs-built_in">rm</span> -rf &lt;<span class="hljs-built_in">dir</span>&gt; <span class="hljs-comment"># 强制删除文件夹</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>git</tag>
      
      <tag>版本控制</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>为Fluid添加评论系统</title>
    <link href="/2025/02/23/comment-sys/"/>
    <url>/2025/02/23/comment-sys/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="note note-info">            <p>缓缓飘落的枫叶像思念</p><p>我点燃烛火温暖岁末的秋天</p>          </div><h2 id="简单介绍">简单介绍</h2><p>utterances是一个基于github issue的评论系统，它利用github的issue来存储评论。</p><p>当访客在博客上发表评论时，会在对应的仓库中创建一个issue，issue的内容就是评论的内容所以要有一个公开的仓库来存储评论。</p><p>构建这个评论系统只需要一个github账号就可以了，还是非常方便的。</p><h2 id="搭建过程">搭建过程</h2><p>先安装utterances，打开 <a href="https://github.com/apps/utterances">utterances - GitHub App</a> 点击 Install 进入安装页面</p><p>按照提示一步一步填入对应的信息</p><p>首先是在仓库访问权限<code>Repositeory access</code>选择仅选定的仓库<code>Only select repositories</code>，然后选择自己的博客仓库（比如我就是 <code>tingshuo-yiqing/tingshuo-yiqing.github.io</code>，也可以安装到其他仓库），然后点击 Install<br><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250224090359554.png" alt=""></p><p>这时已经配置好了，接下来有一些个性化设置让你选择。</p><p><code>Blog Post ↔️ Issue Mapping</code>表示 issues 标题和博客 posts 的映射关系，默认即可。</p><p>把主题配置文件(<code>_config.theme.yml</code>)的 <code>enable: true</code> 和<code>type: utterances</code> 打开,再把 <code>utterances</code> 对应的参数改成HTML里面的。</p><p>复制最底下的HTML代码到博客的 <code>about</code> 中。<br>然后在 <code>index.md</code> 中添加 <code>comments: true</code> 即可。</p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250224091216161.png" alt=""></p><p>这样就可以在 about 页添加评论了。</p>]]></content>
    
    
    
    <tags>
      
      <tag>comment</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>git 使用指北与问题解决</title>
    <link href="/2025/02/20/git-flow/"/>
    <url>/2025/02/20/git-flow/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="note note-info">            <p>想用一杯Latte把你灌醉</p><p>好让你能多爱我一点</p>          </div><h2 id="1-访问github并汉化">1.访问github并汉化</h2><p>在微软商店安装<strong>Watt Toolkit</strong>可以直接加速github，然后用qq邮箱或其它邮箱都可以注册一下</p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250219224935829.png" alt=""></p><p>搜索框搜索“chinese汉化”认准第一个star7.8k即可，然后安装油猴(Tampermonkey)插件，再安装汉化脚本。还有许多脚本可以安装。</p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250219225253894.png" alt=""></p><p>进入文件夹右键打开选项卡，点击<code>用git bash打开</code></p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250220073842647.png" style="zoom:25%;" /><h2 id="2-安装和配置git">2.安装和配置git</h2><p>下载地址<a href="https://git-scm.com/">git-scm.com</a>，<a href="https://registry.npmmirror.com/binary.html?path=git-for-windows/">镜像下载地址</a></p><h4 id="显示隐藏文件夹：">显示隐藏文件夹：</h4><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250219230110370.png" style="zoom: 25%;" /><p>在VS code中显示隐藏文件夹只需要在设置里找到：Files:Exclude再把<code>**/.git</code>删除即可显示出来</p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250219231851407.png" alt=""></p><h2 id="3-git命令行配置">3.git命令行配置</h2><h4 id="初始化仓库过程用到的命令：">初始化仓库过程用到的命令：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">git -v<br>git init  <span class="hljs-comment">#</span><br>git init -b main   <span class="hljs-comment">#-b main 明确告诉 Git 将初始分支命名为 main。</span><br><br>git config --global user.name <span class="hljs-string">&quot;你的名字&quot;</span><br>git config --global user.email <span class="hljs-string">&quot;你的邮箱&quot;</span><br><br>git config --list <span class="hljs-comment">#查看刚刚配置的用户名和邮箱</span><br>git config --global --list <span class="hljs-comment"># 这个也可以查看配置信息</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250219232912375.png" alt=""></p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250219232959200.png" alt=""></p><h4 id="bash的基本操作">bash的基本操作</h4><p>常用快捷键：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">Ctrl + C 中断当前命令<br>Ctrl + L 或 clear: 清屏<br>Ctrl + A 移动光标到行头<br>Ctrl + E: 移动光标到行尾<br>Ctrl + U: 删除光标前的所有字符<br>Ctrl + K: 删除光标后的所有字符<br>Ctrl + W: 删除光标前的一个单词<br>Tab: 自动补全<br>↑ / ↓: 浏览历史命令<br></code></pre></td></tr></table></figure><h2 id="3-基础操作流程">3.基础操作流程</h2><h4 id="专业名词的理解">专业名词的理解</h4><p><code>git status</code>最常见的命令之一，初学者最好每一个命令就查看一下文件的状态.<code>git status -s</code>/<code>git status --short</code>是精简输出</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;xxx&quot;</span> <span class="hljs-comment"># 是将xxx输出到控制台，如果有空格的话要加引号</span><br><span class="hljs-built_in">echo</span> xxx &gt; &lt;file&gt;  <span class="hljs-comment"># 将xxx写入写入文件中，如果没有就创建一个</span><br><span class="hljs-built_in">echo</span> xxx &gt;&gt; &lt;file&gt; <span class="hljs-comment"># 将xxx追加写入文件中</span><br><br><br>git add xxx  <span class="hljs-comment"># U &gt; A</span><br>git add .<br><span class="hljs-comment"># A是已添加索引（会提示你git commit），U是未追踪文件（会提示你git add）</span><br><br>git commit -m <span class="hljs-string">&quot;提交信息，要准确详细&quot;</span><br>git commit     <span class="hljs-comment"># 进入vim编辑器，编辑</span><br><br>git <span class="hljs-built_in">log</span> <br>git <span class="hljs-built_in">log</span> -2 <span class="hljs-comment">#只看最近两条</span><br>git <span class="hljs-built_in">log</span> --oneline# 更简洁<br></code></pre></td></tr></table></figure><h4 id="文件的删除（命令行）">文件的删除（命令行）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">rm</span> &lt;file&gt; <span class="hljs-comment"># 从暂存区和工作区删除</span><br><br>git re -cached &lt;file&gt; <span class="hljs-comment"># 只从暂存区中删除，工作区不变</span><br><br>git <span class="hljs-built_in">rm</span> -f &lt;file&gt; <span class="hljs-comment"># 强制删除文件，即使文件在工作区被修改</span><br><br>git <span class="hljs-built_in">rm</span> -rf &lt;directory&gt; <span class="hljs-comment">#递归删除所有文件和子目录</span><br><br>git commit -m <span class="hljs-string">&quot;删除&lt;file&gt;&quot;</span><br></code></pre></td></tr></table></figure><blockquote><p>删除后需要<code>git commit</code>提交，如果只是想从工作目区中删除文件，可以使用操作系统的删除命令（rm <file>）然后再使用<code>git add .</code></p></blockquote><h4 id="文件删除（IDE）">文件删除（IDE）</h4><h2 id="4-SSH秘钥的创建">4.SSH秘钥的创建</h2><p>生成秘钥（ed25519算法）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-keygen -t ed25519 -C <span class="hljs-string">&quot;your_email@example.com&quot;</span>  <br></code></pre></td></tr></table></figure><p>如果一些旧系统不支持ed25519算法的话，可以使用RSA</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-keygen -t rsa -b 4096 -C <span class="hljs-string">&quot;your_email@example.com&quot;</span><br></code></pre></td></tr></table></figure><p><strong>第一次使用这个命令</strong>一直回车即可</p><p>在用户文件夹里查看密钥对</p><div class="group-image-container"><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250219152152312.png" alt=""></div><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250219152313294.png" alt=""></div></div><div class="group-image-row"><div class="group-image-wrap"><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250220084930823.png" alt=""></div></div></div><p>添加公钥.pub文件复制粘贴至Github→ Settings → SSH Key，再连接测试一下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -T git@github.com<br></code></pre></td></tr></table></figure><p>正常会报错：连接测试时出现：<code>ssh: connect to host github.com port 22: Connection timed out</code>通常是因为网络环境无法通过 <strong>22 端口</strong>连接到 GitHub 的 SSH 服务。可以通过以下步骤解决，官方文档为<a href="https://docs.github.com/en/authentication/troubleshooting-ssh/using-ssh-over-the-https-port">通过HTTP端口使用SSH</a></p><p>我们需要改HTTPS端口（443）使用SSH。方法为在生成的.ssh文件夹中添加配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 编辑 SSH 配置文件</span><br>vim ~/.ssh/config<br><br><span class="hljs-comment"># 配置文件内容：</span><br>Host github.com          <span class="hljs-comment"># 别名，可以自定义</span><br>Hostname ssh.github.com   <span class="hljs-comment"># GitHub SSH 的实际主机名</span><br>Port 443                <span class="hljs-comment"># 使用 443 端口</span><br>User git                <span class="hljs-comment"># 使用 git 用户</span><br></code></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250220074831847.png" style="zoom:25%;" /><p>粘贴好后按Ecs再英文状态下的<code>:wq</code>保存退出，可以检查一下</p><p>再次测试时出现：<code>Hi username ! You've successfully authenticated, but GitHub does not provide shell access.</code>即成功了，我们就可以通过SSH克隆和推送仓库了</p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250220085232998.png" alt=""></p><h2 id="5-gitignore的实践">5.gitignore的实践</h2><p>创建.gitignore文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 将不需要推送的文件写入到.gitignore上</span><br><span class="hljs-built_in">echo</span> xxx &gt; .gitignore<br><span class="hljs-comment"># xxx可以是字符串，文件，文件夹，第一次使用重定向符&gt;</span><br><span class="hljs-comment">#如果已经用了.gitignore文件的话，就用&gt;&gt;追加符来添加新的文件或文件夹</span><br><span class="hljs-built_in">printf</span> <span class="hljs-string">&quot;.xxx\n.xx\n&quot;</span> &gt;&gt; .gitignore<br><span class="hljs-comment">#前面的.表示在根目录下</span><br></code></pre></td></tr></table></figure><p>常见的.gitignore文件包含：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 忽略所有 .log 文件,但是保留error.log文件</span><br>*.<span class="hljs-built_in">log</span><br>!error.log<br><br><span class="hljs-comment"># 忽略 node_modules 目录</span><br>node_modules/<br><br><span class="hljs-comment"># 忽略特定文件</span><br>config.ini<br><br><span class="hljs-comment"># 不忽略某个文件(即使前面已经有忽略规则)</span><br>!important.log<br></code></pre></td></tr></table></figure><blockquote><p>.gitignore 仅对<strong>从未被 Git 跟踪过的文件</strong>生效。若文件已被提交过，即使后续加入 .gitignore，仍需手动从 Git 中移除。此外，未跟踪但未忽略的文件仍可能导致分支污染，需定期检查工作目录状态（git status）</p></blockquote><p>更多模版可以参考github上的项目：<a href="https://github.com/github/gitignore">gitignore</a></p><h2 id="6-版本的回滚">6.版本的回滚</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 查看HEAD</span><br>git <span class="hljs-built_in">log</span> --oneliine --groph <span class="hljs-comment"># 更加简洁的查看提交ID</span><br>git reflog  <span class="hljs-comment"># 含已删除提交历史，可以快速找到提交ID</span><br><br>git diff HEAD &lt;commit-id&gt; <span class="hljs-comment"># 对比差异</span><br><br>git reset --hard HEAD~1  <span class="hljs-comment"># 彻底回退上一个提交</span><br>git reset --soft HEAD~1  <span class="hljs-comment"># 保留修改但回退 commit</span><br><span class="hljs-comment"># HEAD~1一般就是提交ID前6个字母或数字</span><br></code></pre></td></tr></table></figure><p>使用<code>git reset --hard</code>会重置工作目录到指定的提交，所有未提交的修改都会被删除。需要注意备份或暂存（<code>git stash</code>）这些更改，避免数据丢失。</p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250222164535621.png" alt="提交ID"></p><h2 id="7-首次推送的命令：">7.首次推送的命令：</h2><p>关键是：</p><ul><li><p><strong>添加远程仓库的 URL (Add Remote Origin</strong></p></li><li><p><strong>推送本地分支到远程仓库 (Push to Remote):</strong></p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">git remote add origin &lt;你的GitHub仓库URL&gt;<br>git remote -v <span class="hljs-comment">#查看已配置的远程仓库信息</span><br><br>git push -u origin master <span class="hljs-comment">#取决于是main还是master且第一次需要 -u</span><br><br></code></pre></td></tr></table></figure><p>之后便可以</p><ul><li>推送后续提交: <strong>git push</strong> (默认会推送当前分支到其追踪的远程分支)</li><li>拉取远程更新: <strong>git pull</strong> (默认会拉取远程追踪分支的更新并合并到当前分支)</li></ul><h2 id="8-深入分支">8.深入分支</h2><blockquote><p>主分支包含了所有最终修改历史，建议不要乱动。因为你的改动会影响到其它在参与这个项目的人，很可能出现合并冲突。</p></blockquote><table><thead><tr><th>常见分支</th><th>功能</th></tr></thead><tbody><tr><td>develop（开发分支）dev</td><td></td></tr><tr><td>feature（功能分支）feat</td><td></td></tr><tr><td>release（发布分支）</td><td></td></tr><tr><td>hotfix（热修复分支）</td><td></td></tr><tr><td>bugfix（缺陷分支）</td><td></td></tr><tr><td>support（支持分支）</td><td></td></tr></tbody></table><h4 id="本地分支">本地分支</h4><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250222160617241.png" alt=""></p><p>这里可能会出现一个幻觉：我在分支里创建的文件为什么主分支里也有？，不是说都是独立的吗？原因是<strong>你未将新建的文件提交（commit）到分支中</strong>。此时文件处于“未跟踪”状态（untracked）（即还没有add），切换分支时这些未提交的改动会保留在工作目录中，与分支无关。因为<strong>未执行 <code>git add</code> 和 <code>git commit</code></strong>，所以<code>my.log</code> 未被记录到 Git 版本控制中。切换回 <code>master</code> 分支时，<strong>未提交的改动（包括未跟踪文件）会保留在工作目录</strong>，因此 <code>my.log</code> 仍然存在。</p><p>简单来说：</p><ul><li><strong>未提交文件</strong>：游离于分支外，切换分支时保留。</li><li><strong>提交后文件</strong>：与分支绑定，切换分支时自动隔离。</li></ul><p>当我们提交后：</p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250222092557434.png" alt=""></p><p>这样主分支里就没有my.log了，就可以安心在分支里操作不用怕误操作主分支啦</p><p><strong>小总结</strong>：未提交的文件（untracked files）<strong>不属于任何分支</strong>，它们会“跟随”你的工作目录。只有提交到分支后，文件才会与分支绑定。</p><p>接下来是在分支里修改了文件，如果不提交或保存的话<strong>是不会让你切换的</strong></p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250222102912825.png" alt=""></p><p>它会让你在切换之前进行<code>git commit</code>或<code>git stash</code>先暂时保存再<code>git stash pop</code>恢复</p><p><img src="https://cdn.jsdelivr.net/gh/tingshuo-yiqing/PicGo-tuchuang/img/20250222104045050.png" alt=""></p><p>这样就可以在你的本地分支上安心的操作了</p><p><strong>在分支间共享某些文件</strong>时（如配置文件），应通过 Git 的合并（<code>git merge</code>）或变基（<code>git rebase</code>）操作实现，而非手动复制文件。</p><p>执行删除操作的时候要格外小心<br>-d用于删除已合并过的分支，即已经被merge了<br>-D用于强制删除分支（不管是否合并过）</p><p>可以在在命令行中查看分支图<code>git log --graph --oneline --decorate --all</code>来可视化分支结构不过可能有一点抽象</p><h4 id="远程分支">远程分支</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">git branch -a <span class="hljs-comment"># 列出远程和本地分支，即所有分支</span><br><br>git push &lt;远程仓库名称比如origin&gt; &lt;分支名称&gt;  <span class="hljs-comment"># 推送某个分支</span><br>git push &lt;远程仓库名称&gt; --all <span class="hljs-comment"># 推送所有分支</span><br> <br>git push &lt;远程仓库名称&gt; -d &lt;分支名称&gt;<br></code></pre></td></tr></table></figure><p>在github上删除分支时的细节：</p><p>虽然在github上删除远程分支很简单，但是会导致本地库中缓存的远程分支与实际远程分支不一致。所以还要在git bash中同步远程分支执行：<code>git remote prune &lt;远程仓库名称&gt;</code></p><p><strong>还有一些细节比如，回溯、打标签</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">git checkout 提交ID(Commit ID)<br>git checkout 分支<br>git checkout tag<br><br>git tag <span class="hljs-comment"># 查看标签</span><br>git tag -d xxx <span class="hljs-comment"># 删除标签</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>git</tag>
      
      <tag>版本控制</tag>
      
    </tags>
    
  </entry>
  
  
  
  
  
  
  <entry>
    <title></title>
    <link href="/"/>
    <url>/</url>
    
    <content type="html"><![CDATA[]]></content>
    
  </entry>
  
  
  
  <entry>
    <title>me</title>
    <link href="/"/>
    <url>/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs text">2917063923@qq.com<br>tingshuo2917@gmail.com<br></code></pre></td></tr></table></figure>]]></content>
    
  </entry>
  
  
  
  <entry>
    <title>音悦</title>
    <link href="/"/>
    <url>/</url>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><div class="note note-info">            <p>第一次访问这个页面可能需要一点时间加载音乐文件</p>          </div><!-- <div class="custom-audio-player">  <div class="audio-info">    <button class="play-button" id="playButton" aria-label="播放音频">      <svg class="play-icon" viewBox="0 0 24 24" fill="white">        <path d="M8 5v14l11-7z"/>      </svg>      <svg class="pause-icon" viewBox="0 0 24 24" fill="white">        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>      </svg>    </button>    <div class="audio-title">痴心绝对 - 李圣杰</div>  </div>  <div class="progress-container" id="progressContainer">    <div class="progress-bar" id="progressBar"></div>  </div>  <div class="time-display">    <span id="currentTime">0:00</span>    <span id="duration">0:00</span>  </div>  <!-- 修正后的音频路径 -->  <!-- <audio id="audioElement" style="display: none;">    <source src="https://pub-a3f1bd9f229949c4a1c424d879a5badf.r2.dev/M800003kIRU93Grw5P.mp3" type="audio/mpeg">    你的浏览器不支持音频播放。  </audio></div><style>  /* 自定义播放器样式 */  .custom-audio-player {    width: 100%;    background-color: rgba(34, 46, 80, 0.8);    border-radius: 8px;    padding: 12px;    margin: 1.5rem 0;    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);  }  .audio-info { display: flex; align-items: center; margin-bottom: 10px; }  .audio-title {     color: #ffffff;    font-size: 1rem;    font-weight: 600;    margin-left: 10px;    flex-grow: 1;  }  .play-button {    background-color: #0e83cd;    border: none;    border-radius: 50%;    width: 36px;    height: 36px;    cursor: pointer;    transition: background-color 0.3s;    display: flex;    justify-content: center;    align-items: center;  }  .progress-container {    width: 100%;    height: 6px;    background-color: rgba(255, 255, 255, 0.2);    border-radius: 3px;    margin-bottom: 8px;  }  .progress-bar {    height: 100%;    background-color: #0e83cd;    border-radius: 3px;    width: 0%;    transition: width 0.1s linear;  }  .time-display {    display: flex;    justify-content: space-between;    color: rgba(255, 255, 255, 0.8);    font-size: 0.8rem;  }  .pause-icon { display: none; }</style><script>document.addEventListener('DOMContentLoaded', function() {  const audioElement = document.getElementById('audioElement');  const playButton = document.getElementById('playButton');  const playIcon = document.querySelector('.play-icon');  const pauseIcon = document.querySelector('.pause-icon');  const progressBar = document.getElementById('progressBar');  const progressContainer = document.getElementById('progressContainer');  const currentTimeDisplay = document.getElementById('currentTime');  const durationDisplay = document.getElementById('duration');  // 初始化时间显示  audioElement.addEventListener('loadedmetadata', () => {    durationDisplay.textContent = formatTime(audioElement.duration);  });  // 进度条更新  audioElement.addEventListener('timeupdate', () => {    const percent = (audioElement.currentTime / audioElement.duration) * 100;    progressBar.style.width = `${percent}%`;    currentTimeDisplay.textContent = formatTime(audioElement.currentTime);  });  // 播放/暂停控制  playButton.addEventListener('click', () => {    audioElement.paused ? audioElement.play() : audioElement.pause();    playIcon.style.display = audioElement.paused ? 'block' : 'none';    pauseIcon.style.display = audioElement.paused ? 'none' : 'block';  });  // 点击进度条跳转  progressContainer.addEventListener('click', (e) => {    const rect = progressContainer.getBoundingClientRect();    const percent = (e.clientX - rect.left) / rect.width;    audioElement.currentTime = percent * audioElement.duration;  });  // 时间格式化函数  function formatTime(seconds) {    const mins = Math.floor(seconds / 60);    const secs = Math.floor(seconds % 60);    return `${mins}:${secs.toString().padStart(2, '0')}`;  }});</script> {% raw %}<!-- 播放器 --><div class="custom-audio-player">  <div class="audio-info">    <button class="play-button" aria-label="播放音频">      <svg class="play-icon" viewBox="0 0 24 24" fill="white">        <path d="M8 5v14l11-7z"/>      </svg>      <svg class="pause-icon" viewBox="0 0 24 24" fill="white">        <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/>      </svg>    </button>    <div class="audio-title">夜空中最亮的星 - 逃跑计划</div>  </div>  <div class="progress-container">    <div class="progress-bar"></div>  </div>  <div class="time-display">    <span class="currentTime">0:00</span>    <span class="duration">0:00</span>  </div>  <audio class="audioElement" style="display: none;">    <source src="https://video.tingshuoyiqing.top/%E5%A4%9C%E7%A9%BA%E4%B8%AD%E6%9C%80%E4%BA%AE%E7%9A%84%E6%98%9F.mp3" type="audio/mpeg">    浏览器不支持音频播放  </audio>  <!-- 播放列表 -->  <div class="playlist">    <ol>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E7%97%B4%E5%BF%83%E7%BB%9D%E5%AF%B9.mp3" data-title="痴心绝对 - 李圣杰">痴心绝对 - 李圣杰</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E5%BC%A0%E6%95%AC%E8%BD%A9%20%E5%B0%98%E5%9F%83%E8%90%BD%E5%AE%9A.mp3" data-title="尘埃落定 - 张敬轩">尘埃落定 - 张敬轩</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E5%A4%A9%E5%90%8E.mp3" data-title="天后 - 陈势安">天后 - 陈势安</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E5%8F%A5%E5%8F%B7mp3.mp3" data-title="句号 - 邓紫棋">句号 - 邓紫棋</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E5%AF%8C%E5%A3%AB%E5%B1%B1%E4%B8%8B.mp3" data-title="富士山下 - 陈奕迅">富士山下 - 陈奕迅</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E5%86%8D%E8%A7%81.mp3" data-title="再见 - 邓紫棋">再见 - 邓紫棋</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E5%8D%95%E8%BD%A6.mp3" data-title="单车 - 陈奕迅">单车 - 陈奕迅</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E5%9B%9A%E9%B8%9F.mp3" data-title="囚鸟 - 彭羚">囚鸟 - 彭羚</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E7%88%B1%E6%83%85%E8%BD%AC%E7%A7%BB.mp3" data-title="爱情转移 - 陈奕迅">爱情转移 - 陈奕迅</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E7%88%B1%E9%94%99.mp3" data-title="爱错 - 王力宏">爱错 - 王力宏</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E7%BA%A2%E8%B1%86.mp3" data-title="红豆 - 王菲">红豆 - 王菲</li>      <li class="playlist-item" data-src="https://video.tingshuoyiqing.top/%E5%8B%87%E6%B0%94.mp3" data-title="勇气 - 梁静茹">勇气 - 梁静茹</li>    </ol>  </div></div><style>  /* 播放器样式 */  .custom-audio-player {    width: 100%;    background-color: rgba(34, 46, 80, 0.8);    border-radius: 8px;    padding: 12px;    margin: 1.5rem 0;    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);  }  .audio-info { display: flex; align-items: center; margin-bottom: 10px; }  .audio-title {     color: #ffffff;    font-size: 1rem;    font-weight: 600;    margin-left: 10px;    flex-grow: 1;  }  .play-button {    background-color: #0e83cd;    border: none;    border-radius: 50%;    width: 36px;    height: 36px;    cursor: pointer;    transition: background-color 0.3s;    display: flex;    justify-content: center;    align-items: center;  }  .progress-container {    width: 100%;    height: 6px;    background-color: rgba(255, 255, 255, 0.2);    border-radius: 3px;    margin-bottom: 8px;  }  .progress-bar {    height: 100%;    background-color: #0e83cd;    border-radius: 3px;    width: 0%;    transition: width 0.1s linear;  }  .time-display {    display: flex;    justify-content: space-between;    color: rgba(255, 255, 255, 0.8);    font-size: 0.8rem;  }  .pause-icon { display: none; }    /* 播放列表样式 */  .playlist {    margin-top: 10px;  }  .playlist-item {    color: #fff;    padding: 8px;    cursor: pointer;    margin-bottom: 5px;    transition: background-color 0.2s;  }  .playlist-item:hover {    background-color: rgba(255, 255, 255, 0.2);  }</style><script>document.addEventListener('DOMContentLoaded', function() {  // 遍历所有播放器  document.querySelectorAll('.custom-audio-player').forEach(player => {    const audio = player.querySelector('.audioElement');    const playBtn = player.querySelector('.play-button');    const playIcon = player.querySelector('.play-icon');    const pauseIcon = player.querySelector('.pause-icon');    const progressBar = player.querySelector('.progress-bar');    const progressContainer = player.querySelector('.progress-container');    const currentTime = player.querySelector('.currentTime');    const duration = player.querySelector('.duration');    const playlist = player.querySelector('.playlist');    const playlistItems = playlist.querySelectorAll('.playlist-item');    let isPlaying = false;    // 初始化时长    audio.addEventListener('loadedmetadata', () => {      duration.textContent = formatTime(audio.duration);    });    // 更新时间进度    audio.addEventListener('timeupdate', () => {      const progress = (audio.currentTime / audio.duration) * 100;      progressBar.style.width = `${progress}%`;      currentTime.textContent = formatTime(audio.currentTime);    });    // 播放/暂停切换    playBtn.addEventListener('click', () => {      if (audio.paused) {        audio.play();        playIcon.style.display = 'none';        pauseIcon.style.display = 'block';      } else {        audio.pause();        playIcon.style.display = 'block';        pauseIcon.style.display = 'none';      }    });    // 进度条点击跳转    progressContainer.addEventListener('click', (e) => {      const rect = progressContainer.getBoundingClientRect();      const seekTime = ((e.clientX - rect.left) / rect.width) * audio.duration;      audio.currentTime = seekTime;    });    // 点击播放列表项切换音频    playlistItems.forEach(item => {      item.addEventListener('click', function() {        const newSrc = item.getAttribute('data-src');        const newTitle = item.getAttribute('data-title');                audio.src = newSrc;        player.querySelector('.audio-title').textContent = newTitle;                if (isPlaying) {          audio.play();        } else {          playIcon.style.display = 'block';          pauseIcon.style.display = 'none';        }      });    });  });  // 时间格式化函数  function formatTime(seconds) {    const mins = Math.floor(seconds / 60);    const secs = Math.floor(seconds % 60);    return `${mins}:${secs.toString().padStart(2, '0')}`;  }});</script>]]></content>
    
  </entry>
  
  
  
</search>
